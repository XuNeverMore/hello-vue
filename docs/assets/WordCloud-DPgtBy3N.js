import{g as Ft,d as Et,_ as yt,r as mt,o as Pt,w as Wt,c as Rt,a as At,b as Z,e as zt,v as Ot}from"./index-wIrH3VQ5.js";import{c as Bt}from"./capture-DjiBh_Sa.js";var gt={exports:{}};/*!
 * wordcloud2.js
 * http://timdream.org/wordcloud2.js/
 *
 * Copyright 2011 - 2019 Tim Guan-tin Chien and contributors.
 * Released under the MIT license
 */(function(V){window.setImmediate||(window.setImmediate=function(){return window.msSetImmediate||window.webkitSetImmediate||window.mozSetImmediate||window.oSetImmediate||function(){if(!window.postMessage||!window.addEventListener)return null;var C=[void 0],O="zero-timeout-message",D=function(g){var s=C.length;return C.push(g),window.postMessage(O+s.toString(36),"*"),s};return window.addEventListener("message",function(g){if(!(typeof g.data!="string"||g.data.substr(0,O.length)!==O)){g.stopImmediatePropagation();var s=parseInt(g.data.substr(O.length),36);C[s]&&(C[s](),C[s]=void 0)}},!0),window.clearImmediate=function(g){C[g]&&(C[g]=void 0)},D}()||function(C){window.setTimeout(C,0)}}()),window.clearImmediate||(window.clearImmediate=function(){return window.msClearImmediate||window.webkitClearImmediate||window.mozClearImmediate||window.oClearImmediate||function(C){window.clearTimeout(C)}}()),function(z){var W=function(){var i=document.createElement("canvas");if(!i||!i.getContext)return!1;var p=i.getContext("2d");return!(!p||!p.getImageData||!p.fillText||!Array.prototype.some||!Array.prototype.push)}(),C=function(){if(W){for(var i=document.createElement("canvas").getContext("2d"),p=20,S,e;p;){if(i.font=p.toString(10)+"px sans-serif",i.measureText("Ｗ").width===S&&i.measureText("m").width===e)return p+1;S=i.measureText("Ｗ").width,e=i.measureText("m").width,p--}return 0}}(),O=function(s){if(Array.isArray(s)){var i=s.slice();return i.splice(0,2),i}else return[]},D=function(i){for(var p,S,e=i.length;e;)p=Math.floor(Math.random()*e),S=i[--e],i[e]=i[p],i[p]=S;return i},F={},g=function(i,p){if(!W)return;var S=Math.floor(Math.random()*Date.now());Array.isArray(i)||(i=[i]),i.forEach(function(c,t){if(typeof c=="string"){if(i[t]=document.getElementById(c),!i[t])throw new Error("The element id specified is not found.")}else if(!c.tagName&&!c.appendChild)throw new Error("You must pass valid HTML elements, or ID of the element.")});var e={list:[],fontFamily:'"Trebuchet MS", "Heiti TC", "微軟正黑體", "Arial Unicode MS", "Droid Fallback Sans", sans-serif',fontWeight:"normal",color:"random-dark",minSize:0,weightFactor:1,clearCanvas:!0,backgroundColor:"#fff",gridSize:8,drawOutOfBound:!1,shrinkToFit:!1,origin:null,drawMask:!1,maskColor:"rgba(255,0,0,0.3)",maskGapWidth:.3,wait:0,abortThreshold:0,abort:function(){},minRotation:-Math.PI/2,maxRotation:Math.PI/2,rotationSteps:0,shuffle:!0,rotateRatio:.1,shape:"circle",ellipticity:.65,classes:null,hover:null,click:null};if(p)for(var $ in p)$ in e&&(e[$]=p[$]);if(typeof e.weightFactor!="function"){var wt=e.weightFactor;e.weightFactor=function(t){return t*wt}}if(typeof e.shape!="function")switch(e.shape){case"circle":default:e.shape="circle";break;case"cardioid":e.shape=function(t){return 1-Math.sin(t)};break;case"diamond":e.shape=function(t){var a=t%(2*Math.PI/4);return 1/(Math.cos(a)+Math.sin(a))};break;case"square":e.shape=function(t){return Math.min(1/Math.abs(Math.cos(t)),1/Math.abs(Math.sin(t)))};break;case"triangle-forward":e.shape=function(t){var a=t%(2*Math.PI/3);return 1/(Math.cos(a)+Math.sqrt(3)*Math.sin(a))};break;case"triangle":case"triangle-upright":e.shape=function(t){var a=(t+Math.PI*3/2)%(2*Math.PI/3);return 1/(Math.cos(a)+Math.sqrt(3)*Math.sin(a))};break;case"pentagon":e.shape=function(t){var a=(t+.955)%(2*Math.PI/5);return 1/(Math.cos(a)+.726543*Math.sin(a))};break;case"star":e.shape=function(t){var a=(t+.955)%(2*Math.PI/10);return(t+.955)%(2*Math.PI/5)-2*Math.PI/10>=0?1/(Math.cos(2*Math.PI/10-a)+3.07768*Math.sin(2*Math.PI/10-a)):1/(Math.cos(a)+3.07768*Math.sin(a))};break}e.gridSize=Math.max(Math.floor(e.gridSize),4);var o=e.gridSize,lt=o-e.maskGapWidth,J=Math.abs(e.maxRotation-e.minRotation),K=Math.abs(Math.floor(e.rotationSteps)),Q=Math.min(e.maxRotation,e.minRotation),R,I,y,H,N,ft,X;function ct(c,t){return"hsl("+(Math.random()*360).toFixed()+","+(Math.random()*30+70).toFixed()+"%,"+(Math.random()*(t-c)+c).toFixed()+"%)"}switch(e.color){case"random-dark":X=function(){return ct(10,50)};break;case"random-light":X=function(){return ct(50,90)};break;default:typeof e.color=="function"&&(X=e.color);break}var Y;typeof e.fontWeight=="function"&&(Y=e.fontWeight);var tt=null;typeof e.classes=="function"&&(tt=e.classes);var et=!1,j=[],at,ut=function(t){var a=t.currentTarget,r=a.getBoundingClientRect(),l,n;t.touches?(l=t.touches[0].clientX,n=t.touches[0].clientY):(l=t.clientX,n=t.clientY);var f=l-r.left,d=f<0?0:f,m=n-r.top,u=Math.floor(d*(a.width/r.width||1)/o),T=Math.floor(m*(a.height/r.height||1)/o);return j[u]?j[u][T]:null},dt=function(t){var a=ut(t);if(at!==a){if(at=a,!a){e.hover(void 0,void 0,t);return}e.hover(a.item,a.dimension,t)}},ht=function(t){var a=ut(t);a&&(e.click(a.item,a.dimension,t),t.preventDefault())},rt=[],pt=function(t){if(rt[t])return rt[t];var a=t*8,r=a,l=[];for(t===0&&l.push([H[0],H[1],0]);r--;){var n=1;e.shape!=="circle"&&(n=e.shape(r/a*2*Math.PI)),l.push([H[0]+t*n*Math.cos(-r/a*2*Math.PI),H[1]+t*n*Math.sin(-r/a*2*Math.PI)*e.ellipticity,r/a*2*Math.PI])}return rt[t]=l,l},it=function(){return e.abortThreshold>0&&new Date().getTime()-ft>e.abortThreshold},Mt=function(){return e.rotateRatio===0||Math.random()>e.rotateRatio?0:J===0?Q:K>0?Q+Math.floor(Math.random()*K)*J/(K-1):Q+Math.random()*J},xt=function(t,a,r,l){var n=e.weightFactor(a);if(n<=e.minSize)return!1;var f=1;n<C&&(f=function(){for(var st=2;st*n<C;)st+=2;return st}());var d;Y?d=Y(t,a,n,l):d=e.fontWeight;var m=document.createElement("canvas"),u=m.getContext("2d",{willReadFrequently:!0});u.font=d+" "+(n*f).toString(10)+"px "+e.fontFamily;var T=u.measureText(t).width/f,h=Math.max(n*f,u.measureText("m").width,u.measureText("Ｗ").width)/f,M=T+h*2,x=h*3,k=Math.ceil(M/o),P=Math.ceil(x/o);M=k*o,x=P*o;var v=-T/2,w=-h*.4,b=Math.ceil((M*Math.abs(Math.sin(r))+x*Math.abs(Math.cos(r)))/o),E=Math.ceil((M*Math.abs(Math.cos(r))+x*Math.abs(Math.sin(r)))/o),B=E*o,G=b*o;m.setAttribute("width",B),m.setAttribute("height",G),u.scale(1/f,1/f),u.translate(B*f/2,G*f/2),u.rotate(-r),u.font=d+" "+(n*f).toString(10)+"px "+e.fontFamily,u.fillStyle="#000",u.textBaseline="middle",u.fillText(t,v*f,(w+n*.5)*f);var U=u.getImageData(0,0,B,G).data;if(it())return!1;for(var vt=[],q=E,L,nt,ot,A=[b/2,E/2,b/2,E/2];q--;)for(L=b;L--;){ot=o;t:for(;ot--;)for(nt=o;nt--;)if(U[((L*o+ot)*B+(q*o+nt))*4+3]){vt.push([q,L]),q<A[3]&&(A[3]=q),q>A[1]&&(A[1]=q),L<A[0]&&(A[0]=L),L>A[2]&&(A[2]=L);break t}}return{mu:f,occupied:vt,bounds:A,gw:E,gh:b,fillTextOffsetX:v,fillTextOffsetY:w,fillTextWidth:T,fillTextHeight:h,fontSize:n}},Tt=function(t,a,r,l,n){for(var f=n.length;f--;){var d=t+n[f][0],m=a+n[f][1];if(d>=I||m>=y||d<0||m<0){if(!e.drawOutOfBound)return!1;continue}if(!R[d][m])return!1}return!0},kt=function(t,a,r,l,n,f,d,m,u,T){var h=r.fontSize,M;X?M=X(l,n,h,f,d,T):M=e.color;var x;Y?x=Y(l,n,h,T):x=e.fontWeight;var k;tt?k=tt(l,n,h,T):k=e.classes,i.forEach(function(P){if(P.getContext){var v=P.getContext("2d"),w=r.mu;v.save(),v.scale(1/w,1/w),v.font=x+" "+(h*w).toString(10)+"px "+e.fontFamily,v.fillStyle=M,v.translate((t+r.gw/2)*o*w,(a+r.gh/2)*o*w),m!==0&&v.rotate(-m),v.textBaseline="middle",v.fillText(l,r.fillTextOffsetX*w,(r.fillTextOffsetY+h*.5)*w),v.restore()}else{var b=document.createElement("span"),E="";E="rotate("+-m/Math.PI*180+"deg) ",r.mu!==1&&(E+="translateX(-"+r.fillTextWidth/4+"px) scale("+1/r.mu+")");var B={position:"absolute",display:"block",font:x+" "+h*r.mu+"px "+e.fontFamily,left:(t+r.gw/2)*o+r.fillTextOffsetX+"px",top:(a+r.gh/2)*o+r.fillTextOffsetY+"px",width:r.fillTextWidth+"px",height:r.fillTextHeight+"px",lineHeight:h+"px",whiteSpace:"nowrap",transform:E,webkitTransform:E,msTransform:E,transformOrigin:"50% 40%",webkitTransformOrigin:"50% 40%",msTransformOrigin:"50% 40%"};M&&(B.color=M),b.textContent=l;for(var G in B)b.style[G]=B[G];if(u)for(var U in u)b.setAttribute(U,u[U]);k&&(b.className+=k),P.appendChild(b)}})},Ct=function(t,a,r,l,n){if(!(t>=I||a>=y||t<0||a<0)){if(R[t][a]=!1,r){var f=i[0].getContext("2d");f.fillRect(t*o,a*o,lt,lt)}et&&(j[t][a]={item:n,dimension:l})}},St=function(t,a,r,l,n,f){var d=n.occupied,m=e.drawMask,u;m&&(u=i[0].getContext("2d"),u.save(),u.fillStyle=e.maskColor);var T;if(et){var h=n.bounds;T={x:(t+h[3])*o,y:(a+h[0])*o,w:(h[1]-h[3]+1)*o,h:(h[2]-h[0]+1)*o}}for(var M=d.length;M--;){var x=t+d[M][0],k=a+d[M][1];x>=I||k>=y||x<0||k<0||Ct(x,k,m,T,f)}m&&u.restore()},bt=function c(t){var a,r,l;Array.isArray(t)?(a=t[0],r=t[1]):(a=t.word,r=t.weight,l=t.attributes);var n=Mt(),f=O(t),d=xt(a,r,n,f);if(!d||it())return!1;if(!e.drawOutOfBound&&!e.shrinkToFit){var m=d.bounds;if(m[1]-m[3]+1>I||m[2]-m[0]+1>y)return!1}for(var u=N+1,T=function(x){var k=Math.floor(x[0]-d.gw/2),P=Math.floor(x[1]-d.gh/2),v=d.gw,w=d.gh;return Tt(k,P,v,w,d.occupied)?(kt(k,P,d,a,r,N-u,x[2],n,l,f),St(k,P,v,w,d,t),!0):!1};u--;){var h=pt(N-u);e.shuffle&&(h=[].concat(h),D(h));var M=h.some(T);if(M)return!0}return e.shrinkToFit?(Array.isArray(t)?t[1]=t[1]*3/4:t.weight=t.weight*3/4,c(t)):!1},_=function(t,a,r){if(a)return!i.some(function(l){var n=new CustomEvent(t,{detail:r||{}});return!l.dispatchEvent(n)},this);i.forEach(function(l){var n=new CustomEvent(t,{detail:r||{}});l.dispatchEvent(n)},this)},It=function(){var t=i[0];if(t.getContext)I=Math.ceil(t.width/o),y=Math.ceil(t.height/o);else{var a=t.getBoundingClientRect();I=Math.ceil(a.width/o),y=Math.ceil(a.height/o)}if(_("wordcloudstart",!0)){H=e.origin?[e.origin[0]/o,e.origin[1]/o]:[I/2,y/2],N=Math.floor(Math.sqrt(I*I+y*y)),R=[];var r,l,n;if(!t.getContext||e.clearCanvas)for(i.forEach(function(v){if(v.getContext){var w=v.getContext("2d");w.fillStyle=e.backgroundColor,w.clearRect(0,0,I*(o+1),y*(o+1)),w.fillRect(0,0,I*(o+1),y*(o+1))}else v.textContent="",v.style.backgroundColor=e.backgroundColor,v.style.position="relative"}),r=I;r--;)for(R[r]=[],l=y;l--;)R[r][l]=!0;else{var f=document.createElement("canvas").getContext("2d");f.fillStyle=e.backgroundColor,f.fillRect(0,0,1,1);var d=f.getImageData(0,0,1,1).data,m=t.getContext("2d").getImageData(0,0,I*o,y*o).data;r=I;for(var u,T;r--;)for(R[r]=[],l=y;l--;){T=o;t:for(;T--;)for(u=o;u--;)for(n=4;n--;)if(m[((l*o+T)*I*o+(r*o+u))*4+n]!==d[n]){R[r][l]=!1;break t}R[r][l]!==!1&&(R[r][l]=!0)}m=f=d=void 0}if(e.hover||e.click){for(et=!0,r=I+1;r--;)j[r]=[];e.hover&&t.addEventListener("mousemove",dt),e.click&&(t.addEventListener("click",ht),t.style.webkitTapHighlightColor="rgba(0, 0, 0, 0)"),t.addEventListener("wordcloudstart",function v(){t.removeEventListener("wordcloudstart",v),t.removeEventListener("mousemove",dt),t.removeEventListener("click",ht),at=void 0})}n=0;var h,M;e.wait!==0?(h=window.setTimeout,M=window.clearTimeout):(h=window.setImmediate,M=window.clearImmediate);var x=function(w,b){i.forEach(function(E){E.addEventListener(w,b)},this)},k=function(w,b){i.forEach(function(E){E.removeEventListener(w,b)},this)},P=function v(){k("wordcloudstart",v),M(F[S])};x("wordcloudstart",P),F[S]=h(function v(){if(n>=e.list.length){M(F[S]),_("wordcloudstop",!1),k("wordcloudstart",P),delete F[S];return}ft=new Date().getTime();var w=bt(e.list[n]),b=!_("wordclouddrawn",!0,{item:e.list[n],drawn:w});if(it()||b){M(F[S]),e.abort(),_("wordcloudabort",!1),_("wordcloudstop",!1),k("wordcloudstart",P),delete F[S];return}n++,F[S]=h(v,e.wait)},e.wait)}};It()};g.isSupported=W,g.minFontSize=C,g.stop=function(){if(F)for(var i in F)window.clearImmediate(F[i])},V.exports?V.exports=g:z.WordCloud=g}(Et)})(gt);var Lt=gt.exports;const qt=Ft(Lt),Dt={style:{display:"flex","flex-direction":"column","align-items":"center"}},Gt={__name:"WordCloud",setup(V){const z=mt(""),W=mt(null);function C(){Bt(W.value)}function O(g){const s=document.querySelector(g),i=s.getContext("2d"),p=window.devicePixelRatio||1,S=i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1,e=p/S;s.width=s.clientWidth*e,s.height=s.clientHeight*e,s.style.width=s.clientWidth+"px",s.style.height=s.clientHeight+"px",i.scale(e,e)}function D(g){let s=document.querySelector("#canvas");if(!s){console.log("===> canvas is null");return}let i=s.clientWidth;qt(s,{list:g,gridSize:Math.round(16*i/1024),weightFactor:function(p){return Math.pow(p,2.3)*i/1024},fontFamily:"Times, serif",color:function(p,S){return S===12?"#f02222":"#c09292"},rotateRatio:.5,rotationSteps:2,backgroundColor:"#ffe0e0"})}const F=[["互联网科技",8],["人工智能",9],["新能源汽车",8],["生物医药",7],["金融服务",7],["教育培训",7],["电子商务",8],["短视频直播",9],["智能制造",7],["养老服务",6]];return Pt(()=>{requestAnimationFrame(()=>{O("#canvas")}),D(F),Wt(()=>{if(z.value!==""){var g=z.value.split(/,/);g=g.map((s,i,p)=>[s,1+i]),D(g)}})}),(g,s)=>(At(),Rt("div",Dt,[s[2]||(s[2]=Z("a",{href:"https://github.com/timdream/wordcloud2.js/tree/gh-pages",target:"_blank"},"Link",-1)),zt(Z("input",{"onUpdate:modelValue":s[0]||(s[0]=i=>z.value=i),style:{padding:"0.8rem","min-width":"60vw","margin-bottom":"1rem"}},null,512),[[Ot,z.value]]),Z("canvas",{ref_key:"canvas",ref:W,id:"canvas"},null,512),s[3]||(s[3]=Z("div",{style:{height:"1rem"}},null,-1)),Z("button",{onClick:s[1]||(s[1]=i=>C())},"Capture")]))}},_t=yt(Gt,[["__scopeId","data-v-06e33582"]]);export{_t as default};
